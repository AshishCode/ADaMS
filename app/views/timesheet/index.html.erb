<html>
	<head>
		<title>
			Timesheet	
		</title>
	</head>
	<body>
		<div class="col-sm-9" style="margin-top:5px;">	
	  		<form style="margin-top: -20px;" id ="date_filter" action="/timesheet" method="GET" class="form-horizontal">
			<div class="form-group">
					<div class="col-sm-3"> 
						<label for="start_date"> Start Date :</label>
							<input class ="form-control" type="date" name="start_date" id="start_date" value="<%= 
								if params.has_key?(:start_date)
									params[:start_date]
								else
									Date.today - 30
								end %>"/>
					</div>
					<div class="col-sm-3"> 
						<label for="end_date"> End Date :</label>
							<input class="form-control" type="date" name="end_date" id="end_date" value="<%= 
								if params.has_key?(:end_date)
									params[:end_date]
								else	
									Date.today
								end %>"/>
					</div>
					<div class="col-sm-3"> 
						<label for="employee_id"> Employee :</label>
							<select name="employee_id" class="form-control">
								<option class="form-control" value="0">All</option>
								<%
									@users.each { |user|
								%>
								<option class="form-control" value="<%= user.id %>"><%= user.name%></option>
								<% } %>
							</select>
					</div>
					<div class="col-sm-3">
						<button id="submit_filter" class="buttons" style="margin-top: 12%; border-radius: 100px;"><i class="glyphicon glyphicon-ok"></i> </button>
					</div>
				</div>

			</form>
		</div>	
		<table id ="boots" class ="table "data-toggle="table" data-show-columns="true" data-search="true" data-pagination="true" data-show-filter="true" data-sort-name="date" data-sort-order ="desc"
		> 

			<thead>                      
  			<tr class="success">                          
			    <!-- <th data-field="id" data-align="right" data-sortable="true">ID</th> -->
			    <th data-sortable="true">Client</th>
			    <th data-sortable="true">Project</th>
			    <th>Task</th>
			    <th data-field="date" data-sortable="true">Date</th>
			    <th>Hours</th>
			    <th>Role</th>
			    <th>Rate</th>
			    <th data-sortable="true">Is_Billed</th>
			    <th>Workspace</th>
			    <th>Comments</th>
			    <th>Employee_Name</th>
			  </tr>
			</thead>
			<tbody>
		<% @timesheet.each do |entry| %>
		  <tr>
		    <!-- <td></td> -->
		    <td><%= @client.where("id" =>entry.client_id).first.client_name%></td> 
		    <td><%= @project.where("id" => entry.project_id).first.project_name %></td>  
		    <td><%= entry.task %></td> 

		    <td><%= entry.timesheetdate %></td>  

		    <td><%= entry.hours %></td>  
		    <td><%= @rolez.where("id" => entry.role_id).first.role_name %></td>  
		    <td><%= entry.rate %></td>  
		    <td><%= entry.is_billed == true ? "Yes" :"No" %></td>  
		    <td><%= entry.workspace %></td>  
		    <td><%= entry.comments %></td>  
		    <td><%= User.find(entry.employee_id).name %></td>  
		  </tr>
		<% end %>      
		</tbody>
		</table> 
		
	</body>

		<script type="text/javascript">
			// $(function () {
			//     $('#boots').bootstrapTable(); // init via javascript

			//     $(window).resize(function () {
			//         $('#boots').bootstrapTable('resetView');
			//     });
			// });
		</script>
</html>
